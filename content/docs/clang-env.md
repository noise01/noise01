---
date: 2017-05-01
tags: ["c言語"]
---

# 環境構築: C

とりあえず最低限なんか書けて、グラフ出力ができて、Windows環境でもLinuxコマンドが動く環境が欲しい人向け。

## はじめに

大学の教養科目として選択できた情報の授業で、Linuxが入ってるPCを使って簡単なプログラミングをする課題を家でも進めようと思ったら詰まった。まあ結局、Mathematicaぐらいしか使わない研究室に入ったので、その後は役に立つことはなかったが。

大雑把な説明の上に、そもそも言っていることが間違っている可能性が大いにある。

## 必要なもの

- コンパイラ: [MinGW](http://www.mingw.org/)
- Bash: [MSYS2](http://msys2.github.io/)、[git for Windows](http://git-for-windows.github.io/)
- エディタ: [VSCode](http://code.visualstudio.com/)
- グラフ描画ツール: [gnuplot](http://www.gnuplot.info/)

## もう少し詳しく

### コンパイラ

これが無いとC言語は動かない。バイナリ(機械語)に翻訳するためのツールのこと。`gcc`とか`cc`で動くアレ。昔はコンパイラは有料のものが多くて大変だったらしいが、今は無償のものがいくつもある。ここでは`MinGW`を使うことにする。
**Min**imalist **G**NU for **W**indowsの略というだけあって、最小の構成になっているらしい。

### Linux コマンド

Linuxのターミナルに相当するものとして、WindowsにはコマンドプロンプトとかPowerShellが存在するが、同じ操作でもLinuxのものとはコマンドが異なっていたり、使い方が違ったりする。ちなみにMacはUNIX派生のOSなので、なんやかんやLinuxと似たようなコマンドが動作するらしい。両方使い分けるのも面倒なので、WindowsにLinuxコマンドを覚えさせることができるツールを導入することにする。

現在ではWSLによりWindows内にLinuxディストリビューションを構築できるようになったため、そちらを使うのもよいのかもしれない。

ここでは[git for Windows](https://gitforwindows.org/)を使う。これは本来Gitを導入するためのツールであるが、最低限のLinuxコマンドが動く環境も手に入る。自分はそれで特に困っていなかったので紹介する。別の選択肢としては、コンパイラとBashを一括で構築できるCygwinと言うものもあるが多少導入が面倒なので今回は見送った。

### グラフ出力

これは[gnuplot](https://www.gnuplot.info/)一択な気がする。ただWindows版の仕様として日本語などの扱いが微妙なので注意(と言うより諦め)が必要。Linux版と表示もかなり変わる。

### エディタ

`Emacs`や`Vim`を使いたいところではあるが、Windowsだと導入が少し面倒な上、素の状態だとコードのハイライトも貧弱であり、コード補完機能も無く、保存の仕方も初心者には分かりづらい(更に日本語入力に難あり(要出典)(~~そもそもコード書くのに2バイト文字使うなと言う話もある~~))ので、素直に他のコードエディタを使うことにする。

[VSCode](https://code.visualstudio.com/)が軽量なのでおすすめ。

### ターミナル

最初から付いてるのでコマンドプロンプトを使う。`mintty`(`MSYS`や`git for Windows`にも付属している)という代替ツールを使うこともできる。こちらは見た目もカスタマイズ可能な上、文字コードが utf-8 に対応している。そして何よりコマンドの履歴を遡ることができる。

コマンドプロンプトだと、日本語が文字化けする(一応コマンド`chcp 65001`で一時的に文字コードを utf-8 にすることはできる)。さらにコマンド履歴もウィンドウを閉じると~~当然のように~~消える。

## 手順

### 1. システム環境を確認する(64 or 32bit)

`コントロールパネル -> システムとセキュリティ -> システム`で使っているOSが32bitなのか64bitなのかを確認できる。32bitの場合は64bitのものが動作しない。64bitならどちらでも良いが、一般に64bitのものを使ったほうが動作が高速になる。(32bit のソフトは使用できるメモリに制限があるため性能をフルに活かすことができないとかいう話があるらしい。)

また、エクスプローラ(フォルダとかファイルを見るアレ)のPCを右クリックしてプロパティを選択しても同じ画面に飛ぶことができる。後でこの画面に戻ってくるので最小化しておく。

### 2. MinGW をダウンロードする

64bit版も(公式ではない)あるらしいが、とりあえず何も考えずにダウンロードすることにする。

1. サイドメニューの`Downloads` -> `Download mingw-get-setup.exe`をクリックする
2. ダウンロードしたものを開き、`Install` -> 適当にチェック(意味がよくわからなければそのままで)して`Continue` -> と進んでいくとなんやかんやで必要ファイルのダウンロードが始まる
3. 終わったら`Quit`**ではなく**`Continue`をクリックする。
4. `mingw-developer-toolkit`、`mingw32-base`、`msys-base(多分)`をそれぞれ右クリックし`+Mark for Installation`をクリックする。他のものも必要だと思ったら同様にする。
5. メニューバーの`Installation`の`Apply Changes`をクリックし`Apply`をクリックするとまたダウンロードが始まる。

これで`gcc`コマンドが動くようになる……**というわけではない**。

### 3. git for Windows をダウンロードする

[こちらの記事]()を参照

### 4. 必要ファイルのダウンロード完了を待つ

### 5. コマンドプロンプトを起動し Path が通っているか確認する

### 6. 終わり

## その他の説明

見た人もいるかもしれないがMinGWは~~クッソ古い~~更新が止まって久しいので、`MSYS`からインストールしたりしたほうが良いらしい。

最後に動作確認として、まずコマンドプロンプトを起動し、コードがある適当なディレクトリに`cd`コマンドで移動したあと、gcc コマンドとか gnuplot コマンドとかを実行してみよう。
